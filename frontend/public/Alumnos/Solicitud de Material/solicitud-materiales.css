/* ---------- Paleta ---------- */
:root{
  --rojo-1:#b30000; 
  --rojo-2:#7a0000; 
  --rojo-3:#8b0000;
  --txt:#4b0000; 
  --bg-card:#eeeeee; 
  --bg-white:#ffffff;
}

/* ---------- Base ---------- */
*{ box-sizing:border-box; }
html,body{ height:100%; }

/* Quitamos el centrado vertical que recortaba el header */
body{
  font-family:'Segoe UI', Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: radial-gradient(circle at center, #8b0000 10%, #2b0000 80%);
  color:var(--txt);
  margin:0;
  min-height:100vh;
  display:block;                /* antes: flex */
  padding:24px 0;               /* respiración superior/inferior */
}

/* ---------- Contenedor principal ---------- */
.container{
  background:var(--bg-white);
  width:min(1100px, 92vw);      /* mejor cabida del header */
  margin:0 auto;
  min-height:auto;
  border-radius:25px;
  box-shadow:0 0 35px rgba(0,0,0,.45);
  padding:30px 40px;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  animation:fadeIn .7s ease-in-out;
  transition:.3s ease;
  overflow:visible;
}

/* Animación sutil sin escalar (el scale cortaba el encabezado) */
.container:hover{ transform: translateY(-2px); }
@keyframes fadeIn{
  from{opacity:0; transform:translateY(25px);}
  to{opacity:1; transform:translateY(0);}
}

/* ---------- Header ---------- */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:3px solid var(--rojo-2);
  padding-bottom:10px;
  gap:10px 16px;
  flex-wrap:wrap;                     /* permite bajar el título si falta ancho */
}

/* Logos fluidos */
.logo{ 
  width: clamp(56px, 8vw, 84px);
  height:auto;
}

/* Títulos: ocupan toda la fila cuando lo necesiten */
.titulo{ 
  flex:1 1 100%;
  padding:4px 0;
}
.titulo h1{ 
  margin:0; 
  text-align:center; 
  color:var(--rojo-2); 
  font-size:clamp(18px, 2.2vw, 22px); 
  line-height:1.15; 
  letter-spacing:.2px; 
  white-space:normal; 
  word-break:break-word;
}
.titulo h2{ 
  margin:3px 0 0; 
  text-align:center; 
  color:var(--rojo-2); 
  font-size:clamp(17px, 2.0vw, 20px); 
  font-weight:800; 
  letter-spacing:.2px;
  white-space:normal; 
  word-break:break-word;
}
.titulo h3{ 
  margin:4px 0 0; 
  text-align:center; 
  color:var(--rojo-2); 
  font-size:clamp(16px, 1.9vw, 18px); 
  font-weight:900;
  white-space:normal; 
  word-break:break-word;
}

/* En pantallas muy anchas, el título puede compartir fila con logos */
@media (min-width:1025px){
  .titulo{ flex:1 1 auto; }
}

/* ---------- Tarjeta / formulario ---------- */
.card{ 
  background:var(--bg-card); 
  border-radius:18px; 
  padding:16px;                  /* un poco más compacto */
  margin-top:14px; 
}

.top-row{ 
  display:flex; 
  gap:20px;                      /* antes 40px */
  align-items:flex-end; 
  flex-wrap:wrap; 
  padding:10px 10px 0; 
}

.field-line label, 
.field label{ 
  color:var(--rojo-2); 
  font-weight:700; 
}

.input-line{ 
  border:none; 
  border-bottom:2px solid var(--rojo-2); 
  background:transparent; 
  padding:6px 4px; 
  min-width:200px;               /* antes 220px */
  color:var(--txt); 
}
.input-line:focus{ 
  outline:none; 
  border-bottom-color:var(--rojo-1); 
}

/* ---------- Buscador / cantidad ---------- */
.middle-row{ 
  display:flex; 
  align-items:flex-end; 
  gap:16px; 
  padding:12px 10px 6px; 
  flex-wrap:wrap; 
}
.field{ 
  display:flex; 
  flex-direction:column; 
  gap:6px; 
  position:relative; 
}

/* Cantidad */
.cantidad-container{ 
  display:flex; 
  align-items:center; 
  gap:10px; 
}
.qty-wrap input{ 
  width:110px; 
  padding:10px; 
  border:2px solid #a00000; 
  border-radius:10px; 
}
.btn-add{
  width:40px; 
  height:40px; 
  border-radius:10px; 
  display:flex; 
  align-items:center; 
  justify-content:center;
  background:linear-gradient(to right, var(--rojo-1), var(--rojo-2)); 
  color:#fff; 
  border:none; 
  cursor:pointer;
}

/* ---------- Tabla ---------- */
.content-row{ margin-top:10px; }
.tabla{ 
  background:#fffdfd; 
  padding:25px; 
  border-radius:18px; 
  box-shadow:0 4px 12px rgba(0,0,0,.1); 
}
table{ 
  width:100%; 
  border-collapse:collapse; 
  border-radius:10px; 
  overflow:hidden; 
  background:#fffafc; 
  table-layout:auto;             /* evita overflow horizontal */
}
th{ 
  background:linear-gradient(to right, var(--rojo-1), var(--rojo-2)); 
  color:#fff; 
  padding:12px; 
  font-weight:700; 
  text-align:center; 
}
td{ 
  border-bottom:1px solid #d6bcbc; 
  padding:10px 8px; 
  text-align:center; 
  color:#5a0000; 
  vertical-align:middle; 
}
tr:hover td{ background:#ffe8e8; }
td.editing{ background:#fff5f5 !important; }

.row-actions{ 
  display:flex; 
  gap:10px; 
  justify-content:center; 
  align-items:center; 
}
.row-actions .icon-btn{
  width:36px; 
  height:36px; 
  border-radius:10px; 
  border:0; 
  cursor:pointer;
  box-shadow:0 6px 14px rgba(0,0,0,.18); 
  background:#fff; 
  color:var(--rojo-2);
  transition:transform .15s ease, box-shadow .15s ease;
}
.row-actions .icon-btn:hover{ 
  transform:translateY(-2px) scale(1.04); 
  box-shadow:0 8px 18px rgba(122,0,0,.28); 
}
.row-actions .icon-btn.danger{ color:#8b0000; }

/* ---------- Footer ---------- */
.footer-bar{ 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  gap:20px; 
  flex-wrap:wrap; 
  margin-top:20px; 
}
.left-actions, 
.right-actions{ 
  display:flex; 
  align-items:center; 
  gap:14px; 
  flex-wrap:wrap; 
}

.btn{
  background:linear-gradient(to right, var(--rojo-1), var(--rojo-2)); 
  color:#fff; 
  border:none; 
  padding:12px 28px; 
  border-radius:35px;
  cursor:pointer; 
  font-weight:700; 
  font-size:1em; 
  box-shadow:0 5px 12px rgba(0,0,0,.3); 
  transition:.3s ease;
}
.btn:hover{ 
  transform:translateY(-3px) scale(1.05); 
  background:linear-gradient(to right, #d00000, var(--rojo-3)); 
  box-shadow:0 8px 20px rgba(122,0,0,.6); 
}
.btn-primary{ background:linear-gradient(to right, var(--rojo-1), var(--rojo-2)); }
.btn-danger{
  background:linear-gradient(to right, #8b0000, #5c0000);
  color:#fff; 
  border:none; 
  padding:12px 28px; 
  border-radius:35px; 
  cursor:pointer; 
  font-weight:800;
  box-shadow:0 5px 14px rgba(139,0,0,.35); 
  position:relative; 
  overflow:hidden;
}
.btn-danger::after{
  content:""; 
  position:absolute; 
  inset:0; 
  border-radius:35px; 
  border:2px solid rgba(255,255,255,.15);
  pointer-events:none; 
  animation:dangerPulse 2.2s ease-in-out infinite;
}
@keyframes dangerPulse{ 
  0%,100%{ box-shadow:0 0 0 0 rgba(139,0,0,0); } 
  50%{ box-shadow:0 0 0 4px rgba(139,0,0,.15); } 
}

.iconos{ display:flex; gap:20px; }
.icono{
  font-size:1.6rem; 
  color:var(--rojo-2); 
  text-decoration:none; 
  transition:.3s;
  width:48px; 
  height:48px; 
  border-radius:12px; 
  background:#fff; 
  display:flex; 
  align-items:center; 
  justify-content:center;
  box-shadow:0 6px 18px rgba(0,0,0,.3);
}
.icono:hover{ color:#d00000; transform:scale(1.07) rotate(-4deg); }

button:disabled{ 
  opacity:.45; 
  cursor:not-allowed !important; 
  filter:grayscale(.3); 
  box-shadow:none; 
}

/* ---------- Finder (buscador de materiales) ---------- */
.finder{ 
  position: relative; 
  width: min(560px, 90vw); 
  display: grid; 
  grid-template-columns: 1fr; 
  gap: 8px; 
}
.finder input[type="text"]{
  width: 100%; 
  padding: 12px 14px 12px 40px; 
  border: 2px solid #a00000; 
  border-radius: 12px;
  background: #fff; 
  color: #2b2b2b; 
  outline: none; 
  transition: box-shadow .16s, border-color .16s;
}
.finder input[type="text"]:focus{ 
  border-color: #8b0000; 
  box-shadow: 0 10px 24px rgba(139,0,0,.15); 
}
.finder-icon{ 
  position: absolute; 
  left: 12px; 
  top: 50%; 
  transform: translateY(-50%); 
  color: var(--rojo-2); 
  opacity: .9; 
  pointer-events:none; 
}
.finder-list{
  position: absolute; 
  left: 0; right: 0; 
  top: calc(100% + 6px);
  background: #fff; 
  border-radius: 14px; 
  border: 1px solid rgba(0,0,0,.08);
  box-shadow: 0 18px 48px rgba(0,0,0,.22); 
  max-height: 320px; 
  overflow: auto; 
  z-index: 10;
}
.finder-list.hidden{ display: none; }
.fi-sep{ 
  position: sticky; 
  top: 0; 
  background:#f8f2f2; 
  color:#7a0000; 
  font-weight:800; 
  padding: 6px 10px; 
  border-radius: 8px; 
  border:1px solid rgba(122,0,0,.10); 
  margin: 4px 0 2px; 
}
.fi-item{ 
  padding: 10px 12px; 
  display:flex; 
  justify-content:space-between; 
  gap:10px; 
  cursor:pointer; 
  border-bottom:1px solid rgba(0,0,0,.04); 
  border-radius:8px; 
}
.fi-item:last-child{ border-bottom:0; }
.fi-item .name{ color:#1f2937; font-weight:600; }
.fi-item:hover, .fi-item.active{ background:#fff6f6; }
.fi-hl{ 
  background:linear-gradient(180deg, rgba(255,235,235,.9), rgba(255,220,220,.9)); 
  padding:0 2px; 
  border-radius:4px; 
}

/* ---------- UI centrada (toast + modal) ---------- */
#ui-layer{ position: fixed; inset: 0; pointer-events: none; z-index: 99998; }
#toastCenter{
  position: absolute; 
  left: 50%; top: 50%;
  transform: translate(-50%, -50%) scale(.92);
  min-width: 280px; 
  max-width: min(90vw, 520px);
  padding: 14px 18px; 
  border-radius: 16px; 
  color: #fff; 
  text-align: center; 
  font-weight: 700;
  background: radial-gradient(120% 120% at 10% 10%, #8b0000 0%, #5c0000 60%);
  box-shadow: 0 25px 70px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.06);
  opacity: 0; 
  filter: blur(3px);
  transition: opacity .22s, transform .22s, filter .22s; 
  pointer-events: none;
}
#toastCenter.show{ opacity:1; filter:blur(0); transform:translate(-50%, -50%) scale(1); }
.toast-info   { background: radial-gradient(120% 120% at 10% 10%, #7a0000 0%, #8b0000 60%); }
.toast-ok     { background: radial-gradient(120% 120% at 10% 10%, #0a8a43 0%, #066a33 60%); }
.toast-warn   { background: radial-gradient(120% 120% at 10% 10%, #b36b00 0%, #8a5200 60%); }
.toast-danger { background: radial-gradient(120% 120% at 10% 10%, #a00000 0%, #7a0000 60%); }

#modalRoot.hidden{ display:none; }
#modalRoot{ position: fixed; inset:0; pointer-events: auto; z-index: 99999; }
.modal-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.35); backdrop-filter: blur(3px); }
.modal-card{
  position:absolute; 
  left:50%; top:50%; 
  transform:translate(-50%,-50%) scale(.96);
  width: min(92vw, 520px); 
  background:#fff; 
  border-radius: 18px;
  box-shadow: 0 24px 60px rgba(0,0,0,.35);
  padding: 20px 18px 16px; 
  border: 2px solid rgba(122,0,0,.10);
  transition: transform .18s, opacity .18s; 
  opacity: 0;
}
#modalRoot:not(.hidden) .modal-card{ opacity: 1; transform: translate(-50%,-50%) scale(1); }
.modal-icon{
  width: 48px; height: 48px; 
  border-radius: 14px; 
  display:flex; 
  align-items:center; 
  justify-content:center;
  font-weight:900; color:#fff; 
  background: linear-gradient(135deg, #8b0000, #5c0000);
  box-shadow: 0 8px 18px rgba(139,0,0,.35), inset 0 0 0 2px rgba(255,255,255,.12);
  margin: 6px auto 12px;
}
#modalTitle{ margin: 6px 0 6px; text-align:center; color: var(--rojo-2); }
#modalMsg{ margin: 0 8px 10px; text-align:center; color:#3b3b3b; }
.modal-actions{ display:flex; gap:12px; justify-content:center; padding-top:8px; }
#modalAccept, #modalCancel{ pointer-events:auto; }

/* ---------- Responsive ---------- */
@media (max-width:1024px){
  .container:hover{ 
    transform:none; 
    box-shadow:0 0 35px rgba(0,0,0,.45);  /* sin zoom para evitar clipping */
  }
}
@media (max-width:900px){
  .top-row{ gap:16px; }
  .middle-row{ gap:12px; }
  .btn{ padding:10px 22px; }
}
@media (max-width:720px){
  .input-line{ min-width:170px; }
}

/* Que las celdas muestren todo (nombres largos, etc.) */
.tabla table th,
.tabla table td{
  white-space: normal;
  word-break: break-word;
}

/* Botón + un poco más cómodo en desktop */
@media (min-width: 768px){
  #plusQty{ width: 44px; height: 44px; }
}

/* Que las celdas muestren todo el texto largo (nombres/materiales) */
.tabla table th,
.tabla table td{
  white-space: normal;
  word-break: break-word;
}
